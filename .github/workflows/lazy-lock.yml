name: lazy-lock

on:
  workflow_dispatch: # allows manual triggering
  push:
    branches:
      - main

permissions:
  contents: write

jobs:
  lazy-lock:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v6
      - name: install-nix
        uses: cachix/install-nix-action@v31
        with:
          nix_path: nixpkgs=channel:nixos-unstable
      - name: get-flake-outputs
        run: |-
          nix build . --dry-run --json | jq '.'